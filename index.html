import React, { useEffect, useState } from "react";

// Waterboom ê°„ë‹¨ ë²„ì „ â€” í•˜ë£¨ ë¬¼ ì‚¬ìš©ëŸ‰ ê¸°ë¡ë§Œ ê°€ëŠ¥
// ê¸°ëŠ¥:
// - í•˜ë£¨ ë¬¼ ì‚¬ìš©ëŸ‰ ì…ë ¥ ë° ì €ì¥ (ë¡œì»¬ìŠ¤í† ë¦¬ì§€)
// - ì˜¤ëŠ˜ ê¸°ë¡ë§Œ í‘œì‹œ

export default function WaterboomApp() {
  const STORAGE_KEY = "waterboom_today";
  const today = new Date().toISOString().slice(0, 10);
  const [liters, setLiters] = useState("");

  useEffect(() => {
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) {
      const data = JSON.parse(saved);
      if (data.date === today) setLiters(data.liters);
    }
  }, []);

  function saveUsage() {
    if (!liters || liters < 0) {
      alert("ì˜¬ë°”ë¥¸ ë¬¼ ì‚¬ìš©ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”.");
      return;
    }
    localStorage.setItem(STORAGE_KEY, JSON.stringify({ date: today, liters }));
    alert("ì˜¤ëŠ˜ì˜ ë¬¼ ì‚¬ìš©ëŸ‰ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
  }

  return (
    <div className="min-h-screen flex flex-col justify-center items-center bg-blue-50">
      <div className="bg-white p-6 rounded-2xl shadow-md w-80 text-center">
        <h1 className="text-2xl font-bold mb-4">ğŸ’§ Waterboom</h1>
        <p className="text-gray-600 mb-4">ì˜¤ëŠ˜({today}) ì‚¬ìš©í•œ ë¬¼ì˜ ì–‘ì„ ê¸°ë¡í•˜ì„¸ìš”.</p>

        <input
          type="number"
          min="0"
          className="w-full p-2 border rounded mb-3"
          placeholder="ì‚¬ìš©í•œ ë¬¼ (ë¦¬í„°)"
          value={liters}
          onChange={(e) => setLiters(e.target.value)}
        />

        <button
          onClick={saveUsage}
          className="w-full bg-blue-600 text-white py-2 rounded-xl hover:bg-blue-700 transition"
        >
          ì €ì¥í•˜ê¸°
        </button>

        {liters && (
          <p className="mt-4 text-gray-700">
            ì˜¤ëŠ˜ ì‚¬ìš©í•œ ë¬¼: <span className="font-semibold">{liters} L</span>
          </p>
        )}
      </div>
    </div>
  );
}
